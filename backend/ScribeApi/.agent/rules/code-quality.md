---
trigger: always_on
---

Please analyze the following code and provide refactoring suggestions to improve its quality, maintainability, and performance;


Analysis Areas
Please evaluate and suggest improvements for:

Code Structure & Organization

Function/method length and single responsibility
Code duplication (DRY principle)
Separation of concerns
Module/class organization


Readability & Maintainability

Variable and function naming
Code clarity and self-documentation
Comments (are they necessary, helpful, or outdated?)
Complexity reduction


Performance & Efficiency

Algorithmic complexity
Unnecessary operations or iterations
Memory usage optimization
Caching opportunities


Error Handling & Robustness

Edge cases coverage
Error handling completeness
Input validation
Defensive programming


Best Practices & Patterns

Language-specific idioms
Design patterns that could be applied
Modern language features that could be used
Security considerations


Testing & Testability

How testable is the current code?
Dependencies that make testing difficult
Suggestions for improving testability